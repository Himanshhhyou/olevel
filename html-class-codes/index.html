<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Code Viewer</title>

  <!-- Highlight.js Theme -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" id="hljs-theme" />
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .sidebar { transition: transform 0.3s ease; }
    .fade-in { animation: fadeIn 0.5s ease-in; }
    .code-container { display: flex; width: 100%; background: #0d1117; border-radius: 0.5rem; overflow-x: auto; }
    pre { margin: 0; white-space: pre; flex-shrink: 0; }
    .line-numbers { user-select: none; padding-right: 1rem; color: #6b7280; background: #1e293b; text-align: right; }
    .settings-panel { transition: transform 0.3s ease; }
    #hamburger-icon, .fa-cog { transition: transform 0.2s ease; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* Glassmorphism */
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
    }
  </style>
</head>
<body class="min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300 font-sans">

  <!-- 🔹 Header -->
  <header class="glass text-white p-4 flex justify-between items-center shadow-md">
    <div class="flex items-center gap-2 text-lg font-bold">
      <i class="fas fa-code"></i> LearnAngle
    </div>
    <div class="flex items-center gap-3">
      <!-- Dark Mode -->
      <button id="theme-toggle" class="p-2 rounded-full bg-gray-700 hover:bg-gray-600" title="Toggle Theme">
        <i class="fas fa-moon"></i>
      </button>
      <!-- Mobile Menu -->
      <button id="menu-btn" class="text-2xl md:hidden p-2 rounded hover:bg-blue-700" onclick="toggleSidebar()">
        <i id="hamburger-icon" class="fas fa-bars"></i>
      </button>
      <!-- Settings -->
      <button class="p-2 rounded-full bg-gray-700 hover:bg-gray-600" onclick="toggleSettings()" title="Settings">
        <i class="fas fa-cog"></i>
      </button>
    </div>
  </header>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40" onclick="closeSidebar()"></div>

  <main class="flex flex-1">
    <!-- 🔹 Sidebar -->
    <aside id="sidebar" class="sidebar w-72 glass border-r border-gray-200 dark:border-gray-700 p-4 flex flex-col gap-4 fixed md:static top-0 left-0 h-full z-50 -translate-x-full md:translate-x-0">

      <!-- Switch Tabs -->
      <div class="flex justify-between items-center bg-gray-200 dark:bg-gray-700 p-1 rounded-lg">
        <button id="files-tab" class="flex-1 py-2 rounded-md bg-blue-500 text-white font-medium">Files</button>
        <button id="projects-tab" class="flex-1 py-2 rounded-md text-gray-700 dark:text-gray-200">Projects</button>
      </div>

      <!-- Search (only for files) -->
      <input id="search-bar" type="text" class="p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 mt-2"
        placeholder="Search files..." oninput="filterFiles(this.value)" />

      <!-- Files List -->
      <div id="files-section" class="file-list flex flex-col gap-2 max-h-[60vh] overflow-y-auto text-sm mt-2">
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/01_my-first-webpage.html')">
          <i class="fas fa-file-code"></i> 01_my-first-webpage.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/02_container-and-empty-tag.html')">
          <i class="fas fa-file-code"></i> 02_container-and-empty-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/03_headings.html')">
          <i class="fas fa-file-code"></i> 03_headings.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/04_style-tag.html')">
          <i class="fas fa-file-code"></i> 04_style-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/05_script-tag.html')">
          <i class="fas fa-file-code"></i> 05_script-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/06_img-tag.html')">
          <i class="fas fa-file-code"></i> 06_img-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/07_base-tag.html')">
          <i class="fas fa-file-code"></i> 07_base-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/08_link-tag.html')">
          <i class="fas fa-file-code"></i> 08_link-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/08_link-tag.css')">
          <i class="fas fa-paint-brush"></i> 08_link-tag.css
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/09_meta-tag.html')">
          <i class="fas fa-file-code"></i> 09_meta-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/10_noscript.html')">
          <i class="fas fa-file-code"></i> 10_noscript.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/11_body-tag-attributes.html')">
          <i class="fas fa-file-code"></i> 11_body-tag-attributes.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/12_body-tag-attributes-2.html')">
          <i class="fas fa-file-code"></i> 12_body-tag-attributes-2.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/13_meta-theme.html')">
          <i class="fas fa-file-code"></i> 13_meta-theme.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/14_formatting-tags.html')">
          <i class="fas fa-file-code"></i> 14_formatting-tags.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/15_teletype-tag.html')">
          <i class="fas fa-file-code"></i> 15_teletype-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/16_font-tag.html')">
          <i class="fas fa-file-code"></i> 16_font-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/17_pre-tag.html')">
          <i class="fas fa-file-code"></i> 17_pre-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/18_hr-tag.html')">
          <i class="fas fa-file-code"></i> 18_hr-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/19_div-tag.html')">
          <i class="fas fa-file-code"></i> 19_div-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/20_anchor-tag.html')">
          <i class="fas fa-file-code"></i> 20_anchor-tag.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/21_anchor-target.html')">
          <i class="fas fa-file-code"></i> 21_anchor-target.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/22_html-entities.html')">
          <i class="fas fa-file-code"></i> 22_html-entities.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/23_internal-anchor.html')">
          <i class="fas fa-file-code"></i> 23_internal-anchor.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/24_link-jump.html')">
          <i class="fas fa-file-code"></i> 24_link-jump.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/25_link-colors.html')">
          <i class="fas fa-file-code"></i> 25_link-colors.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/26_comment.html')">
          <i class="fas fa-file-code"></i> 26_comment.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/27_table-1.html')">
          <i class="fas fa-file-code"></i> 27_table-1.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/28_table-2.html')">
          <i class="fas fa-file-code"></i> 28_table-2.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/29_table-rowspan-1.html')">
          <i class="fas fa-file-code"></i> 29_table-rowspan-1.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/30_table-rowspan-2.html')">
          <i class="fas fa-file-code"></i> 30_table-rowspan-2.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/31_table-colspan-1.html')">
          <i class="fas fa-file-code"></i> 31_table-colspan-1.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/32_col-row.html')">
          <i class="fas fa-file-code"></i> 32_col-row.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/33_school-time-table.html')">
          <i class="fas fa-file-code"></i> 33_school-time-table.html
        </div>
        <!--
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('class-codes/05_script-tag.html')">
          <i class="fab fa-js"></i> 05_script-tag.html
        </div>
        -->
      
      </div>

      <!-- Projects List (hidden by default) -->
      <div id="projects-section" class="hidden flex flex-col gap-2 max-h-[60vh] overflow-y-auto text-sm mt-2">
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('mini-projects/maggieRecipe.html')">
          <i class="fas fa-utensils"></i> maggieRecipe.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('mini-projects/teacher-day.html')">
          <i class="fas fa-chalkboard-teacher"></i> teacher-day.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('mini-projects/chess-board.html')">
          <i class="fa-solid fa-chess-board"></i> chess-board.html
        </div>
        <div class="file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white" onclick="loadCode('mini-projects/minecraft-sword.html')">
          <i class="fa-solid fa-sword"></i> minecraft-sword.html
        </div>
      </div>
    </aside>

    <!-- 🔹 Content -->
    <section class="content flex-1 p-6 overflow-y-auto fade-in">
      <div class="flex justify-between items-center mb-4 flex-wrap gap-2">
        <h2 class="text-2xl font-semibold flex items-center gap-2"><i class="fas fa-eye"></i> Code Preview</h2>
        <div class="flex gap-2">
          <button id="copy-btn" class="p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center gap-1" onclick="copyCode()">
            <i class="fas fa-copy"></i> Copy
          </button>
          <button id="download-btn" class="p-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 flex items-center gap-1" onclick="downloadCode()">
            <i class="fas fa-download"></i> Download
          </button>
          <button id="fullscreen-btn" class="p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-1" onclick="toggleFullscreen()">
            <i class="fas fa-expand"></i> Fullscreen
          </button>
        </div>
      </div>

      <div class="flex gap-2 mb-2">
        <button onclick="toggleWrap()" class="p-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"><i class="fas fa-text-width"></i> Wrap</button>
      </div>

      <div class="code-container rounded-lg">
        <pre class="line-numbers p-4"></pre>
        <pre><code id="code-block" class="language-none"></code></pre>
      </div>

      <iframe id="live-preview" class="w-full h-[400px] mt-6 rounded-lg shadow-lg bg-white"></iframe>
    </section>

    <!-- 🔹 Settings Panel -->
    <div id="settings-panel" class="settings-panel fixed top-0 right-0 h-full w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-200 dark:border-gray-700 transform translate-x-full transition-transform z-50">
      <h3 class="text-lg font-semibold mb-4"><i class="fas fa-sliders-h"></i> Settings</h3>
      <label class="block mb-1">Font Size</label>
      <input type="range" id="font-size-slider" min="12" max="24" value="16" class="w-full" oninput="changeFontSize(this.value)">
      <button class="mt-4 p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 w-full" onclick="toggleSettings()">
        Close
      </button>
    </div>
  </main>

  <!-- 🔹 Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script>
    let currentFilename = '';
    let recentFiles = [];
    let wrapEnabled = false;

    async function loadCode(filename) {
      try {
        const res = await fetch(filename);
        if (!res.ok) throw new Error("File not found");
        const text = await res.text();
        currentFilename = filename;

        const codeBlock = document.getElementById("code-block");
        const ext = filename.split('.').pop();
        codeBlock.className = `language-${ext === "css" ? "css" : ext === "js" ? "javascript" : "html"}`;
        codeBlock.textContent = text;
        hljs.highlightElement(codeBlock);
        updateLineNumbers(text);
        closeSidebar();

        const preview = document.getElementById("live-preview");
        preview.style.display = ext === "html" ? "block" : "none";
        if (ext === "html") preview.srcdoc = text;

        addRecentFile(filename);
      } catch (err) {
        document.getElementById("code-block").textContent = "⚠️ " + err.message;
        document.querySelector(".line-numbers").textContent = "";
        document.getElementById("live-preview").style.display = "none";
      }
    }

    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const icon = document.getElementById("hamburger-icon");
      sidebar.classList.toggle("-translate-x-full");
      overlay.classList.toggle("hidden");
      icon.classList.toggle("fa-bars");
      icon.classList.toggle("fa-times");
    }

    function closeSidebar() {
      document.getElementById("sidebar").classList.add("-translate-x-full");
      document.getElementById("overlay").classList.add("hidden");
      document.getElementById("hamburger-icon").classList.add("fa-bars");
      document.getElementById("hamburger-icon").classList.remove("fa-times");
    }

    function toggleSettings() {
      document.getElementById("settings-panel").classList.toggle("translate-x-full");
    }

    function copyCode() {
      navigator.clipboard.writeText(document.getElementById("code-block").textContent).then(() => {
        const btn = document.getElementById("copy-btn");
        btn.innerHTML = "<i class='fas fa-check'></i> Copied!";
        setTimeout(() => btn.innerHTML = "<i class='fas fa-copy'></i> Copy", 2000);
      });
    }

    function downloadCode() {
      if (!currentFilename) return;
      const blob = new Blob([document.getElementById("code-block").textContent], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = currentFilename;
      a.click();
      URL.revokeObjectURL(url);
    }

    function updateLineNumbers(text) {
      document.querySelector(".line-numbers").textContent = Array.from({ length: text.split('\n').length }, (_, i) => i + 1).join('\n');
    }

    function changeFontSize(size) {
      document.getElementById("code-block").style.fontSize = `${size}px`;
      document.querySelector(".line-numbers").style.fontSize = `${size}px`;
    }

    function filterFiles(query) {
      document.querySelectorAll("#files-section .file-item").forEach(item => {
        item.style.display = item.textContent.toLowerCase().includes(query.toLowerCase()) ? "flex" : "none";
      });
    }

    function toggleFullscreen() {
      const iframe = document.getElementById("live-preview");
      if (iframe.requestFullscreen) iframe.requestFullscreen();
    }

    function toggleWrap() {
      wrapEnabled = !wrapEnabled;
      document.getElementById("code-block").style.whiteSpace = wrapEnabled ? "pre-wrap" : "pre";
    }

    function addRecentFile(filename) {
      if (!recentFiles.includes(filename)) {
        recentFiles.unshift(filename);
        if (recentFiles.length > 5) recentFiles.pop();
      }
      const recentDiv = document.getElementById("recent-files");
      if (!recentDiv) return;
      recentDiv.innerHTML = "";
      recentFiles.forEach(f => {
        const div = document.createElement("div");
        div.className = "file-item p-2 flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-blue-500 hover:text-white";
        div.innerHTML = `<i class="fas fa-file-code"></i> ${f}`;
        div.onclick = () => loadCode(f);
        recentDiv.appendChild(div);
      });
    }

    // 🔹 Sidebar Tabs Toggle
    const filesTab = document.getElementById("files-tab");
    const projectsTab = document.getElementById("projects-tab");
    const filesSection = document.getElementById("files-section");
    const projectsSection = document.getElementById("projects-section");
    const searchBar = document.getElementById("search-bar");

    filesTab.addEventListener("click", () => {
      filesSection.classList.remove("hidden");
      projectsSection.classList.add("hidden");
      searchBar.style.display = "block";

      filesTab.classList.add("bg-blue-500", "text-white");
      projectsTab.classList.remove("bg-blue-500", "text-white");
      projectsTab.classList.add("text-gray-700", "dark:text-gray-200");
    });

    projectsTab.addEventListener("click", () => {
      filesSection.classList.add("hidden");
      projectsSection.classList.remove("hidden");
      searchBar.style.display = "none";

      projectsTab.classList.add("bg-blue-500", "text-white");
      filesTab.classList.remove("bg-blue-500", "text-white");
      filesTab.classList.add("text-gray-700", "dark:text-gray-200");
    });

    // Theme Toggle
    document.getElementById("theme-toggle").addEventListener("click", () => {
      document.body.classList.toggle("dark");
      const icon = document.querySelector("#theme-toggle i");
      if (document.body.classList.contains("dark")) {
        icon.classList.remove("fa-moon"); icon.classList.add("fa-sun");
      } else {
        icon.classList.remove("fa-sun"); icon.classList.add("fa-moon");
      }
    });
  </script>
</body>
</html>
